#include <bits/stdc++.h>
using namespace std;
///base class
template<class T>
class Sorting{
public:
    void virtual sort(T arr[],int size)=0;
};
///-------------------------------------------------------------------------------
///Insertion sort

template<class T>
class insertion : public Sorting<T>{
public:
void sort(T arr[],int size) override{
    cout<<"Insertion sort\n";
    for (int i = 1; i < size; ++i) {
       T temp=arr[i];
       int j=i-1;
        while (j>=0 && temp<arr[j]){
            arr[j + 1] = arr[j];
            j--;
        }
        arr[j + 1] = temp;

    }

}

};
///-------------------------------------------------------------------------------
///Selection sort
template<class T>
class selection: public Sorting<T>{
public:
    void sort(T arr[],int size) override{
        cout<<"Selection sort\n";

        for(int i=0;i<size-1;i++){
            int minIndex = i;
            for (int j = i+1; j < size; ++j) {
                if (arr[j]<arr[minIndex])
                    minIndex=j;
            }
            if(minIndex!=i);
            swap(arr[i],arr[minIndex]);
        }
    }
};
///-------------------------------------------------------------------------------
///Bubble sort
template<class T>
class bubble: public Sorting<T>{
public:
    void sort(T arr[],int size) override{
        cout<<"Bubble sort\n";
        for (int i = 0; i < size-1; ++i) {
            for (int j = i+1; j <size ; ++j) {
                if (arr[j]<arr[i])
                    swap(arr[j],arr[i]);

            }
        }
    }
};
///-------------------------------------------------------------------------------
///Shell sort
template<class T>
class Shell:public Sorting<T>{
    void shell(int arr[],int size,int k){
        if(k<=1){
            cout<<"Shell sort\n";
            return;
        }
        for(int i=k; i<size;i++){
            int j=i;
            while (j>=k && arr[j]<arr[j-k]){
                swap(arr[j],arr[j-k]);
                j=j-k;
            }
        }

    }
    void sort(int arr[],int size)override{

        int k=size/2;

        while (k){
            shell(arr,size,k);
            k/=2;
        }
    }
};
///-------------------------------------------------------------------------------
/// Context Class
template<class T>
class SorterContext {
private:
    Sorting<T>* strategy;
public:
    SorterContext(Sorting<T>* strategy = nullptr) : strategy(strategy) {}

    void setStrategy(Sorting<T>* newStrategy) {
        strategy = newStrategy;
    }

    void sort(T arr[], int size) {

            strategy->sort(arr, size);

    }
};


int main() {
    int arr[5]={2,3,1,4,5};
    int n=5;
    insertion<int>insertion;
    selection<int>selection;
    bubble<int>bubble;
    Shell<int>shell;
    SorterContext<int> sorter;
    sorter.setStrategy(&shell);
    sorter.sort(arr,n);
    for (int i = 0; i < n; ++i) {
        cout<<arr[i]<<" ";
    }
    cout<<endl;

    return 0;
}
